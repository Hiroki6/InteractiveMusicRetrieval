{% extends 'bases/base.html' %}
{% block title %}楽曲一覧{% endblock title %}

{% block main %}
<div class = "main">
  <h2>{{ artist_name }}</h2>
  <div class = "clearfix">
    {% for song in results %}
      <div class = "content">
        <iframe width = "420" height = "315" src = "https://www.youtube.com/embed/{{ song.url }}" frameborder="0" allowfullscreen></iframe>
        <p class = "song-info">{{ song.artist.name }} / {{ song.name }}</p>
        <form class = "like-form" name = "like" method = "POST" action = "/recommendation/artist/{{ song.artist.id }}">
          {% csrf_token %}
          {% if song.id not in songs %}
          <input type = "hidden" name = "like_type" value = 1>
          <button class = "preference-button like-button" type = "submit" name = "song_id" value = {{song.id}}>
            like <i class="fa fa-thumbs-o-up" hidden="true"></i>
          </button>
          {% else %}
          <input type = "hidden" name = "like_type" value = 0>
          <button class = "preference-button erase-button" type = "submit" name = "song_id" value = {{song.id}}>
            取り消す
          </button>
          {% endif %}
        </form>
      </div>
    {% endfor %}
  </div>
  <div class="paginator">
    {% if results.has_previous %}
    <a href="?page={{ results.previous_page_number }}">前へ</a> 
    {% endif %}

    {% for page in results.paginator.page_range %}
      <!-- 現在のページへはリンクを貼らない -->
      {% if page == results.number %}
      <strong>{{ page }}</strong> 
      <!-- 現在表示しているページの前後5ページへのリンクを表示 -->
      {% elif results.number|add:"-5" <= page and results.number|add:"5" >= page %}
        <a href="?page={{ page }}">{{ page }}</a> 
      {% endif %}
    {% endfor %}

    {% if results.has_next %}
      <a href="?page={{ results.next_page_number }}">次へ</a>
    {% endif %}
  </div>
</div>
{% endblock main %}
